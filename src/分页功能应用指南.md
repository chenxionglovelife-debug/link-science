# åˆ†é¡µåŠŸèƒ½åº”ç”¨æŒ‡å—

## æ¦‚è¿°
æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•ä¸ºç³»ç»Ÿä¸­çš„æ‰€æœ‰åˆ—è¡¨æ·»åŠ åˆ†é¡µåŠŸèƒ½ã€‚

---

## ä¸€ã€é€šç”¨æ­¥éª¤

### Step 1: å¯¼å…¥æ‰€éœ€ç»„ä»¶
```typescript
import { usePagination } from '../components/ui/usePagination';
import { DataPagination } from '../components/ui/data-pagination';
```

### Step 2: åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ usePagination Hook
```typescript
// åœ¨ç»„ä»¶å‡½æ•°ä¸­æ·»åŠ 
const {
  currentPage,
  pageSize,
  totalPages,
  currentData,
  totalItems,
  handlePageChange,
  handlePageSizeChange
} = usePagination(yourDataArray, 10); // 10 ä¸ºé»˜è®¤æ¯é¡µæ•°é‡
```

### Step 3: ä¿®æ”¹åˆ—è¡¨æ¸²æŸ“
```typescript
// åŸæ¥çš„ä»£ç 
{yourDataArray.map((item) => (
  <TableRow key={item.id}>
    ...
  </TableRow>
))}

// ä¿®æ”¹ä¸º
{currentData.map((item) => (
  <TableRow key={item.id}>
    ...
  </TableRow>
))}
```

### Step 4: æ·»åŠ åˆ†é¡µç»„ä»¶
```typescript
// åœ¨ </Table> æ ‡ç­¾ä¹‹åã€</CardContent> æ ‡ç­¾ä¹‹å‰æ·»åŠ 
<DataPagination
  currentPage={currentPage}
  totalPages={totalPages}
  pageSize={pageSize}
  totalItems={totalItems}
  onPageChange={handlePageChange}
  onPageSizeChange={handlePageSizeChange}
/>
```

---

## äºŒã€å„é¡µé¢å…·ä½“åº”ç”¨

### 2.1 ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆUserManagePage.tsxï¼‰

#### éœ€è¦æ·»åŠ åˆ†é¡µçš„åˆ—è¡¨
- ç”¨æˆ·åˆ—è¡¨

#### å®æ–½ä»£ç 
```typescript
// 1. å¯¼å…¥
import { usePagination } from '../components/ui/usePagination';
import { DataPagination } from '../components/ui/data-pagination';

// 2. åœ¨ç»„ä»¶ä¸­æ·»åŠ ï¼ˆåœ¨ users çŠ¶æ€ä¹‹åï¼‰
const {
  currentPage,
  pageSize,
  totalPages,
  currentData: paginatedUsers,
  totalItems,
  handlePageChange,
  handlePageSizeChange
} = usePagination(users, 10);

// 3. ä¿®æ”¹åˆ—è¡¨æ¸²æŸ“
<TableBody>
  {paginatedUsers.map((user) => (
    // ... åŸæœ‰ä»£ç 
  ))}
</TableBody>

// 4. åœ¨è¡¨æ ¼åæ·»åŠ åˆ†é¡µ
</Table>
<DataPagination
  currentPage={currentPage}
  totalPages={totalPages}
  pageSize={pageSize}
  totalItems={totalItems}
  onPageChange={handlePageChange}
  onPageSizeChange={handlePageSizeChange}
/>
```

---

### 2.2 é¢˜åº“ç®¡ç†é¡µé¢ï¼ˆProblemManagePage.tsxï¼‰

#### éœ€è¦æ·»åŠ åˆ†é¡µçš„åˆ—è¡¨
1. é¢˜ç›®ç®¡ç† - é¢˜ç›®åˆ—è¡¨
2. è¯•å·ç®¡ç† - è¯•å·åˆ—è¡¨

#### å®æ–½ä»£ç 

**é¢˜ç›®åˆ—è¡¨åˆ†é¡µï¼š**
```typescript
// 1. å¯¼å…¥ï¼ˆå·²å®Œæˆï¼‰
import { usePagination } from '../components/ui/usePagination';
import { DataPagination } from '../components/ui/data-pagination';

// 2. æ·»åŠ åˆ†é¡µHook
const {
  currentPage: problemPage,
  pageSize: problemPageSize,
  totalPages: problemTotalPages,
  currentData: paginatedProblems,
  totalItems: problemTotalItems,
  handlePageChange: handleProblemPageChange,
  handlePageSizeChange: handleProblemPageSizeChange
} = usePagination(problems, 20);

// 3. ä¿®æ”¹æ¸²æŸ“
<TableBody>
  {paginatedProblems.map((problem) => (
    // ... åŸæœ‰ä»£ç 
  ))}
</TableBody>

// 4. æ·»åŠ åˆ†é¡µç»„ä»¶
</Table>
<DataPagination
  currentPage={problemPage}
  totalPages={problemTotalPages}
  pageSize={problemPageSize}
  totalItems={problemTotalItems}
  onPageChange={handleProblemPageChange}
  onPageSizeChange={handleProblemPageSizeChange}
/>
```

**è¯•å·åˆ—è¡¨åˆ†é¡µï¼š**
```typescript
// åŒæ ·çš„æ–¹å¼ä¸ºè¯•å·åˆ—è¡¨æ·»åŠ åˆ†é¡µ
const examPagination = usePagination(exams, 10);

// åœ¨è¯•å·åˆ—è¡¨ä¸­ä½¿ç”¨
{examPagination.currentData.map((exam) => ...)}

<DataPagination {...examPagination} />
```

---

### 2.3 è®¢å•è´¢åŠ¡é¡µé¢ï¼ˆOrderFinancePage.tsxï¼‰

#### éœ€è¦æ·»åŠ åˆ†é¡µçš„åˆ—è¡¨
1. è®¢å•ç®¡ç† - è®¢å•åˆ—è¡¨
2. å‘ç¥¨ç®¡ç† - å‘ç¥¨åˆ—è¡¨

#### å®æ–½ä»£ç 

**è®¢å•åˆ—è¡¨åˆ†é¡µï¼š**
```typescript
const orderPagination = usePagination(orders, 20);

<TableBody>
  {orderPagination.currentData.map((order) => (
    // ... åŸæœ‰ä»£ç 
  ))}
</TableBody>

</Table>
<DataPagination
  currentPage={orderPagination.currentPage}
  totalPages={orderPagination.totalPages}
  pageSize={orderPagination.pageSize}
  totalItems={orderPagination.totalItems}
  onPageChange={orderPagination.handlePageChange}
  onPageSizeChange={orderPagination.handlePageSizeChange}
/>
```

**å‘ç¥¨åˆ—è¡¨åˆ†é¡µï¼š**
```typescript
const invoicePagination = usePagination(invoices, 20);

// åŒæ ·çš„æ–¹å¼åº”ç”¨
```

---

### 2.4 åˆ†é”€ç®¡ç†é¡µé¢ï¼ˆDistributionPage.tsxï¼‰

#### éœ€è¦æ·»åŠ åˆ†é¡µçš„åˆ—è¡¨
1. æç°è®°å½• - æç°åˆ—è¡¨
2. åˆ†é”€æ˜ç»† - åˆ†é”€æ˜ç»†åˆ—è¡¨

#### å®æ–½ä»£ç 
```typescript
// æç°è®°å½•åˆ†é¡µ
const withdrawPagination = usePagination(withdrawRecords, 20);

// åˆ†é”€æ˜ç»†åˆ†é¡µ
const detailsPagination = usePagination(distributionDetails, 20);

// åº”ç”¨æ–¹å¼åŒä¸Š
```

---

### 2.5 åˆ¸ç ç®¡ç†é¡µé¢ï¼ˆCouponManagePage.tsxï¼‰

#### éœ€è¦æ·»åŠ åˆ†é¡µçš„åˆ—è¡¨
1. åˆ¸ç ç®¡ç† - åˆ¸ç åˆ—è¡¨
2. åˆä½œæœºæ„ - æœºæ„åˆ—è¡¨

#### å®æ–½ä»£ç 
```typescript
// åˆ¸ç åˆ—è¡¨åˆ†é¡µ
const couponPagination = usePagination(coupons, 20);

// æœºæ„åˆ—è¡¨åˆ†é¡µ
const orgPagination = usePagination(organizations, 20);

// åº”ç”¨æ–¹å¼åŒä¸Š
```

---

### 2.6 ç³»ç»Ÿè®¾ç½®é¡µé¢ï¼ˆSystemSettingsPage.tsxï¼‰

#### éœ€è¦æ·»åŠ åˆ†é¡µçš„åˆ—è¡¨
1. å•†å“ç®¡ç† - å•†å“åˆ—è¡¨
2. å†…å®¹ç®¡ç† - Banneråˆ—è¡¨
3. å­—å…¸ç®¡ç† - å„ç±»å­—å…¸åˆ—è¡¨

#### å®æ–½ä»£ç 
```typescript
// å•†å“åˆ—è¡¨åˆ†é¡µ
const productPagination = usePagination(products, 10);

// Banneråˆ—è¡¨åˆ†é¡µ
const bannerPagination = usePagination(banners, 10);

// å­—å…¸åˆ—è¡¨åˆ†é¡µ
const dictPagination = usePagination(currentDictData, 20);

// åº”ç”¨æ–¹å¼åŒä¸Š
```

---

### 2.7 å°ç¨‹åºç®¡ç†é¡µé¢ï¼ˆMiniProgramManagePage.tsxï¼‰

æ ¹æ®é¡µé¢å®é™…çš„åˆ—è¡¨ç»“æ„æ·»åŠ åˆ†é¡µã€‚

---

## ä¸‰ã€é«˜çº§ç”¨æ³•

### 3.1 ä¸ç­›é€‰åŠŸèƒ½ç»“åˆ

```typescript
// 1. å…ˆè¿›è¡Œç­›é€‰
const filteredData = useMemo(() => {
  return data.filter(item => {
    // ç­›é€‰é€»è¾‘
    return item.name.includes(searchQuery);
  });
}, [data, searchQuery]);

// 2. å¯¹ç­›é€‰åçš„æ•°æ®åº”ç”¨åˆ†é¡µ
const pagination = usePagination(filteredData, 10);

// 3. ç­›é€‰æ¡ä»¶å˜åŒ–æ—¶é‡ç½®é¡µç 
useEffect(() => {
  pagination.resetPage();
}, [searchQuery, statusFilter]);
```

### 3.2 è‡ªå®šä¹‰æ¯é¡µæ•°é‡é€‰é¡¹

```typescript
<DataPagination
  currentPage={currentPage}
  totalPages={totalPages}
  pageSize={pageSize}
  totalItems={totalItems}
  onPageChange={handlePageChange}
  onPageSizeChange={handlePageSizeChange}
  pageSizeOptions={[5, 10, 15, 20]} // è‡ªå®šä¹‰é€‰é¡¹
/>
```

### 3.3 å¤„ç†ç©ºæ•°æ®

```typescript
{currentData.length > 0 ? (
  currentData.map((item) => (
    <TableRow key={item.id}>
      ...
    </TableRow>
  ))
) : (
  <TableRow>
    <TableCell colSpan={columns.length} className="text-center py-8">
      <p className="text-muted-foreground">æš‚æ— æ•°æ®</p>
    </TableCell>
  </TableRow>
)}
```

---

## å››ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 4.1 ä½¿ç”¨ useMemo
```typescript
// ç­›é€‰æ•°æ®æ—¶ä½¿ç”¨ useMemo
const filteredData = useMemo(() => {
  return data.filter(/* ç­›é€‰æ¡ä»¶ */);
}, [data, dependencies]);
```

### 4.2 é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
```typescript
// ä½¿ç”¨ React.memo åŒ…è£¹åˆ—è¡¨é¡¹ç»„ä»¶
const TableRowComponent = React.memo(({ item }) => {
  return <TableRow>...</TableRow>;
});
```

### 4.3 å¤§æ•°æ®é‡ä¼˜åŒ–
```typescript
// å½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œè€ƒè™‘åç«¯åˆ†é¡µ
// ä»…ä»åç«¯è·å–å½“å‰é¡µæ•°æ®
const fetchPageData = async (page: number, size: number) => {
  const response = await api.get(`/data?page=${page}&size=${size}`);
  return response.data;
};
```

---

## äº”ã€å¸¸è§é—®é¢˜

### Q1: ç­›é€‰åé¡µç ä¸é‡ç½®ï¼Ÿ
```typescript
// åœ¨ç­›é€‰æ¡ä»¶å˜åŒ–æ—¶é‡ç½®é¡µç 
useEffect(() => {
  pagination.resetPage();
}, [searchQuery, filterStatus]);
```

### Q2: åˆ‡æ¢æ¯é¡µæ•°é‡åæ•°æ®æ˜¾ç¤ºå¼‚å¸¸ï¼Ÿ
Hook ä¼šè‡ªåŠ¨å¤„ç†ï¼Œç¡®ä¿å½“å‰é¡µä¸è¶…å‡ºèŒƒå›´ã€‚

### Q3: åˆ†é¡µç»„ä»¶æ ·å¼å¦‚ä½•è‡ªå®šä¹‰ï¼Ÿ
å¯ä»¥é€šè¿‡ä¿®æ”¹ `data-pagination.tsx` ç»„ä»¶çš„æ ·å¼ç±»å®ç°ã€‚

---

## å…­ã€å®Œæ•´ç¤ºä¾‹

### å®Œæ•´çš„åˆ†é¡µåˆ—è¡¨å®ç°
```typescript
import React, { useState, useMemo } from 'react';
import { usePagination } from '../components/ui/usePagination';
import { DataPagination } from '../components/ui/data-pagination';
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../components/ui/table';
import { Input } from '../components/ui/input';

export default function ExampleListPage() {
  const [searchQuery, setSearchQuery] = useState('');
  const [data, setData] = useState([/* ä½ çš„æ•°æ® */]);

  // ç­›é€‰æ•°æ®
  const filteredData = useMemo(() => {
    return data.filter(item =>
      item.name.toLowerCase().includes(searchQuery.toLowerCase())
    );
  }, [data, searchQuery]);

  // åº”ç”¨åˆ†é¡µ
  const {
    currentPage,
    pageSize,
    totalPages,
    currentData,
    totalItems,
    handlePageChange,
    handlePageSizeChange,
    resetPage
  } = usePagination(filteredData, 10);

  // æœç´¢æ¡ä»¶å˜åŒ–æ—¶é‡ç½®é¡µç 
  useEffect(() => {
    resetPage();
  }, [searchQuery]);

  return (
    <div>
      {/* æœç´¢æ¡† */}
      <Input
        placeholder="æœç´¢..."
        value={searchQuery}
        onChange={(e) => setSearchQuery(e.target.value)}
      />

      {/* åˆ—è¡¨ */}
      <Table>
        <TableHeader>
          <TableRow>
            <TableHead>åç§°</TableHead>
            <TableHead>æ“ä½œ</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {currentData.map((item) => (
            <TableRow key={item.id}>
              <TableCell>{item.name}</TableCell>
              <TableCell>æ“ä½œæŒ‰é’®</TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>

      {/* åˆ†é¡µç»„ä»¶ */}
      <DataPagination
        currentPage={currentPage}
        totalPages={totalPages}
        pageSize={pageSize}
        totalItems={totalItems}
        onPageChange={handlePageChange}
        onPageSizeChange={handlePageSizeChange}
      />
    </div>
  );
}
```

---

## ä¸ƒã€æ‰¹é‡åº”ç”¨æ¸…å•

### å¾…æ·»åŠ åˆ†é¡µçš„é¡µé¢

- [ ] UserManagePage.tsx - ç”¨æˆ·åˆ—è¡¨
- [ ] ProblemManagePage.tsx - é¢˜ç›®åˆ—è¡¨ã€è¯•å·åˆ—è¡¨
- [ ] OrderFinancePage.tsx - è®¢å•åˆ—è¡¨ã€å‘ç¥¨åˆ—è¡¨
- [ ] DistributionPage.tsx - æç°è®°å½•ã€åˆ†é”€æ˜ç»†
- [ ] CouponManagePage.tsx - åˆ¸ç åˆ—è¡¨ã€æœºæ„åˆ—è¡¨
- [ ] SystemSettingsPage.tsx - å•†å“åˆ—è¡¨ã€Banneråˆ—è¡¨ã€å­—å…¸åˆ—è¡¨
- [ ] MiniProgramManagePage.tsx - å„ç±»é…ç½®åˆ—è¡¨
- [x] ExamAuditManagePage.tsx - è¯•å·å®¡æ ¸åˆ—è¡¨ï¼ˆå·²å®Œæˆï¼‰

### é¢„ä¼°å·¥ä½œé‡
- æ¯ä¸ªåˆ—è¡¨çº¦éœ€10-15åˆ†é’Ÿ
- æ€»è®¡çº¦15ä¸ªåˆ—è¡¨
- é¢„è®¡3-4å°æ—¶å®Œæˆ

---

## å…«ã€æ³¨æ„äº‹é¡¹

### 8.1 æ•°æ®ä¸€è‡´æ€§
- ç¡®ä¿ currentData ç”¨äºæ¸²æŸ“
- ç¡®ä¿ totalItems ç”¨äºç»Ÿè®¡

### 8.2 ç­›é€‰è”åŠ¨
- ç­›é€‰æ¡ä»¶å˜åŒ–åé‡ç½®é¡µç 
- ä½¿ç”¨ useEffect ç›‘å¬ç­›é€‰æ¡ä»¶

### 8.3 æ€§èƒ½è€ƒè™‘
- ä½¿ç”¨ useMemo ç¼“å­˜ç­›é€‰ç»“æœ
- é¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—

---

## ä¹ã€æµ‹è¯•æ£€æŸ¥é¡¹

å¯¹æ¯ä¸ªæ·»åŠ åˆ†é¡µçš„åˆ—è¡¨ï¼Œæ£€æŸ¥ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] é¡µç åˆ‡æ¢æ­£å¸¸
- [ ] æ¯é¡µæ•°é‡åˆ‡æ¢æ­£å¸¸
- [ ] é¦–é¡µ/å°¾é¡µè·³è½¬æ­£å¸¸
- [ ] æ•°æ®ç»Ÿè®¡å‡†ç¡®
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†ï¼ˆç©ºæ•°æ®ã€åªæœ‰ä¸€é¡µç­‰ï¼‰
- [ ] ç­›é€‰ååˆ†é¡µæ­£å¸¸
- [ ] æ’åºååˆ†é¡µæ­£å¸¸

---

## åã€å¿«é€Ÿå‚è€ƒ

### å®Œæ•´å¯¼å…¥è¯­å¥
```typescript
import { usePagination } from '../components/ui/usePagination';
import { DataPagination } from '../components/ui/data-pagination';
```

### å®Œæ•´Hookç”¨æ³•
```typescript
const pagination = usePagination(dataArray, pageSize);
```

### å®Œæ•´ç»„ä»¶ç”¨æ³•
```typescript
<DataPagination
  currentPage={pagination.currentPage}
  totalPages={pagination.totalPages}
  pageSize={pagination.pageSize}
  totalItems={pagination.totalItems}
  onPageChange={pagination.handlePageChange}
  onPageSizeChange={pagination.handlePageSizeChange}
/>
```

### ç®€å†™æ–¹å¼ï¼ˆæ¨èï¼‰
```typescript
const pagination = usePagination(dataArray, 10);

// æ¸²æŸ“
{pagination.currentData.map(item => ...)}

<DataPagination {...pagination} />
```

---

## å®Œæˆï¼ğŸ‰

æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥å¿«é€Ÿä¸ºæ‰€æœ‰åˆ—è¡¨æ·»åŠ ä¸“ä¸šçš„åˆ†é¡µåŠŸèƒ½ã€‚å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒå·²å®Œæˆçš„ `ExamAuditManagePage.tsx` ç¤ºä¾‹ä»£ç ã€‚
