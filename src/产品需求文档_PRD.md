# CodeQuest v2.1 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
CodeQuest是一个面向青少年用户的PC端编程刷题网站，专注于提供个性化、智能化的编程学习体验。平台通过AI技术实现精准的能力评估和个性化推荐，帮助青少年用户系统性提升编程能力。

### 1.2 目标用户
- **主要用户群体**：8-18岁青少年学生
- **次要用户群体**：编程教育工作者、家长
- **用户特征**：
  - 对编程感兴趣或需要参加等级考试
  - 习惯使用数字化学习工具
  - 需要系统性、游戏化的学习体验
  - 重视学习效果和进度反馈

### 1.3 产品价值
- **学习效率提升**：通过AI智能推荐和个性化路径规划，提高学习效率
- **能力精准评估**：科学的水平测评系统，准确定位学习起点
- **学习兴趣激发**：游戏化设计和AI助手陪伴，增强学习动机
- **学习效果可视化**：详细的数据统计和进度跟踪，让学习成果看得见

## 2. 版本更新说明 (v2.1)

### 2.1 核心优化点
1. **测评触发优化**：从页面加载改为用户登录后触发，提升用户体验
2. **AI助手升级**：从小图标升级为大型拟人化设计，增强交互感
3. **布局优化**：调整首页学习统计与AI助手位置，突出AI功能

### 2.2 新增特性
- 登录后1.5秒智能弹出水平测评邀请
- 28x28像素大型拟人化AI助手头像
- 丰富的AI助手动画效果（眨眼、微笑、粒子特效）
- 优化的首页布局，AI助手位置更加突出

## 3. 功能需求详细说明

### 3.1 用户认证与测评系统

#### 3.1.1 登录注册功能
**功能描述**：用户账号管理和身份验证
**技术实现**：
- 组件：`LoginModal.tsx`
- 状态管理：React useState + localStorage
- 数据结构：
```typescript
interface UserInfo {
  id: string;
  username: string;
  email: string;
  avatar: string;
  registrationDate: string;
  level: number;
  experience: number;
}
```

**交互流程**：
1. 用户点击登录按钮
2. 弹出登录模态框
3. 输入用户名/密码
4. 验证成功后触发`onLoginSuccess`回调
5. 1.5秒后检查是否需要显示测评弹窗

#### 3.1.2 水平测评系统
**功能描述**：新用户智能能力评估
**技术实现**：
- 主要组件：`LevelAssessmentModal.tsx`, `AssessmentPage.tsx`, `AssessmentReport.tsx`
- 触发条件：localStorage中无'hasSeenAssessment'标记
- 数据结构：
```typescript
interface AssessmentConfig {
  subject: 'python' | 'cpp' | 'scratch';
  level: 'beginner' | 'intermediate' | 'advanced';
}

interface AssessmentResults {
  score: number;
  weakPoints: string[];
  strengths: string[];
  recommendations: string[];
  estimatedLevel: string;
}
```

**业务逻辑**：
1. 用户登录成功 → 检查测评状态
2. 未完成测评 → 1.5秒后弹出邀请弹窗
3. 用户选择科目和等级 → 进入测评页面
4. 完成测评 → 生成个性化诊断报告
5. 保存测评结果 → 用于后续个性化推荐

### 3.2 首页模块

#### 3.2.1 每日任务系统
**功能描述**：gamification设计的每日学习目标
**技术实现**：
```typescript
interface DailyTask {
  id: string;
  name: string;
  type: 'checkin' | 'practice' | 'review';
  xp: number;
  completed: boolean;
  description: string;
}
```

**任务类型**：
- 每日签到：+10 XP
- 完成3道练习题：+50 XP  
- 复习5道错题：+30 XP
- 连续学习30分钟：+40 XP

#### 3.2.2 AI助手卡片 (v2.1新增)
**功能描述**：大型拟人化AI学习伙伴
**设计规格**：
- 尺寸：28x28像素主体头像
- 动画效果：悬浮、眨眼、旋转、粒子特效
- 交互反馈：鼠标悬停放大1.05倍，点击缩小0.95倍
- 颜色方案：紫色到蓝色渐变背景

**技术特性**：
- 使用Motion.js实现复杂动画
- 6个装饰粒子环绕动画
- 智能光环旋转效果
- 面部表情动画（眼睛、嘴巴）

#### 3.2.3 智能推荐系统
**功能描述**：基于用户薄弱知识点的个性化内容推荐
**推荐算法**：
1. 读取用户测评结果和练习历史
2. 分析薄弱知识点权重
3. 匹配对应难度的试卷和题目
4. 按推荐度排序展示

**数据来源**：
- 水平测评结果
- 错题分析数据
- 学习进度统计
- 知识点掌握度

### 3.3 赛考刷题模块

#### 3.3.1 试卷管理系统
**功能描述**：各类编程竞赛和等级考试题库
**支持类型**：
- 青少年编程等级考试（Python、C++、Scratch）
- 信息学奥赛预备题
- 算法基础训练题
- 编程思维启蒙题

**筛选维度**：
- 编程语言：Python、C++、Scratch、JavaScript
- 难度等级：入门、基础、进阶、竞赛
- 题目类型：选择题、编程题、算法题
- 知识点：数据结构、算法、语法基础

#### 3.3.2 考试模式
**功能描述**：模拟真实考试环境的限时答题
**技术特性**：
- 倒计时功能
- 自动保存答题进度
- 防作弊机制（禁止复制粘贴、切换窗口警告）
- 实时同步答题状态

### 3.4 错题复习模块

#### 3.4.1 智能错题分析
**功能描述**：AI分析错题原因，提供针对性建议
**分析维度**：
- 错误类型：语法错误、逻辑错误、算法错误
- 知识点分类：数组操作、循环结构、条件判断等
- 错误频率：统计同类错误出现次数
- 改进建议：提供具体的学习路径

#### 3.4.2 错题筛选系统  
**筛选条件**：
- 知识点：按具体知识点分类
- 错误率：>80%、60-80%、40-60%、<40%
- 时间范围：最近一周、一月、三月、全部
- 题目类型：选择题、编程题、算法题
- 难度等级：入门、基础、进阶、竞赛

### 3.5 学习报告模块

#### 3.5.1 数据可视化
**图表类型**：
- 学习时长趋势图（折线图）
- 知识点掌握雷达图
- 错题率分布饼图
- 能力成长曲线图
- 每日活跃度热力图

**技术实现**：使用Recharts库构建响应式图表

#### 3.5.2 AI学习诊断
**诊断内容**：
- 学习习惯分析
- 知识结构评估  
- 学习效率建议
- 个性化学习路径
- 能力提升预测

### 3.6 AI智能系统

#### 3.6.1 智能对话功能
**功能描述**：24/7在线AI学习助手
**对话能力**：
- 编程问题解答
- 学习方法指导
- 心理鼓励支持
- 个性化建议提供

**技术实现**：
- 对话界面：科技感渐变背景
- 消息样式：用户消息（紫蓝渐变）vs AI消息（半透明白色）
- 输入增强：支持文字输入和语音输入（预留）

#### 3.6.2 学习建议推送
**推送策略**：
- 时间间隔：30-60秒随机触发
- 内容个性化：基于当前学习状态
- 显示方式：气泡提示，3秒自动消失
- 用户控制：可手动关闭

**建议类型**：
- 学习提醒："今天要不要挑战一道新的算法题？"
- 复习建议："复习一下之前的错题，巩固知识点吧！"
- 进度鼓励："坚持每天练习，你的编程能力正在稳步提升！"
- 薄弱点提醒："发现你在循环结构上还需要加强，推荐几道相关题目？"

## 4. 技术规格说明

### 4.1 前端技术栈
- **框架**：React 18 + TypeScript
- **状态管理**：React Hooks (useState, useEffect)
- **UI组件库**：shadcn/ui (40+ 组件)
- **样式方案**：Tailwind CSS v4.0
- **动画库**：Motion.js (原Framer Motion)
- **图表库**：Recharts
- **图标库**：Lucide React

### 4.2 数据存储方案
- **临时状态**：React组件状态 (useState)
- **持久化存储**：浏览器localStorage
- **关键数据**：
  - 用户信息：`userInfo`
  - 测评状态：`hasSeenAssessment`
  - 薄弱知识点：`userWeakPoints`
  - 学习进度：`learningProgress`

### 4.3 组件架构设计
```
App.tsx (根组件)
├── Navigation.tsx (导航栏)
├── HomePage.tsx (首页)
│   ├── AIMascot.tsx (AI助手)
│   └── 其他首页组件
├── ContestPage.tsx (赛考刷题)
├── MistakesPage.tsx (错题复习)
├── ProfilePage.tsx (学习报告)
├── AccountPage.tsx (个人中心)
├── ExamPage.tsx (考试页面)
├── ProblemPage.tsx (题目页面)
└── 测评系统
    ├── LevelAssessmentModal.tsx
    ├── AssessmentPage.tsx
    └── AssessmentReport.tsx
```

### 4.4 响应式设计规范
- **设计基准**：主要面向PC端，1920x1080分辨率优化
- **最小支持**：1366x768分辨率
- **布局方案**：左侧固定导航栏(256px) + 右侧内容区域
- **适配策略**：使用Tailwind响应式类，保证小屏幕可用性

## 5. 用户体验设计

### 5.1 视觉设计风格
- **整体风格**：年轻化、科技感、未来感
- **色彩方案**：
  - 主色调：紫色系(#8B5CF6)到蓝色系(#3B82F6)渐变
  - 辅助色：绿色(成功)、红色(错误)、黄色(警告)
  - 背景色：浅灰白色(#F8F8F7)，深色模式支持
- **动效设计**：
  - 悬浮光效：按钮和卡片悬停时的光晕效果
  - 渐变动画：背景和按钮的渐变色过渡
  - 微交互：AI助手的表情动画和粒子效果

### 5.2 交互设计原则
- **友好性**：AI助手拟人化设计，降低技术门槛
- **及时反馈**：每个操作都有明确的状态反馈
- **容错性**：支持操作撤销，错误提示友好
- **效率性**：常用功能一键直达，减少操作步骤

### 5.3 无障碍设计
- **键盘导航**：支持Tab键导航所有可交互元素
- **对比度**：确保文字与背景对比度不低于4.5:1
- **字体大小**：基础字体16px，标题和按钮适当放大
- **状态提示**：重要状态变化提供视觉和文本双重提示

## 6. 数据统计与分析

### 6.1 用户行为数据
- **学习时长**：每日、每周、每月学习时间统计
- **题目完成**：完成题目数量、正确率、用时分析
- **知识点掌握**：各知识点的掌握程度和进步趋势
- **登录活跃**：登录频率、连续登录天数、最佳学习时段

### 6.2 学习效果分析
- **能力成长**：通过定期测评跟踪能力提升曲线
- **错误模式**：分析高频错误类型，优化学习路径
- **学习效率**：单位时间内的知识点掌握速度
- **目标达成**：学习目标设定与完成情况统计

### 6.3 AI推荐效果
- **推荐准确性**：用户对推荐内容的接受度和完成率
- **学习路径优化**：基于用户反馈持续优化推荐算法
- **个性化程度**：不同用户的推荐内容差异化分析

## 7. 性能与质量要求

### 7.1 性能指标
- **页面加载时间**：首屏加载 < 2秒
- **交互响应时间**：用户操作响应 < 200ms
- **动画流畅度**：保持60fps流畅动画
- **内存使用**：单页面内存占用 < 100MB

### 7.2 兼容性要求
- **浏览器支持**：Chrome 90+、Firefox 88+、Safari 14+、Edge 90+
- **操作系统**：Windows 10+、macOS 10.15+、主流Linux发行版
- **屏幕分辨率**：1366x768 ~ 3840x2160

### 7.3 安全性要求
- **数据安全**：用户数据本地存储，不涉及敏感信息传输
- **隐私保护**：明确的隐私政策，用户数据使用透明化
- **防作弊**：考试模式的基础防作弊机制

## 8. 后续迭代规划

### 8.1 v2.2版本规划
- **功能增强**：
  - AI助手语音交互功能
  - 更丰富的动画效果和微交互
  - 题目收藏和个人题库功能
- **体验优化**：
  - 代码编辑器语法高亮增强
  - 题目搜索和标签系统
  - 学习成就系统扩展

### 8.2 长期发展方向
- **社交化功能**：好友系统、学习小组、竞赛排行榜
- **内容生态**：用户生成内容、题目分享、学习笔记
- **教师端功能**：班级管理、作业布置、学情分析
- **移动端适配**：响应式设计优化，支持平板和手机使用

## 9. 风险评估与应对

### 9.1 技术风险
- **兼容性问题**：定期测试主流浏览器，建立兼容性测试流程
- **性能瓶颈**：代码分割和懒加载，优化资源加载策略
- **数据丢失**：完善的本地存储容错机制和数据备份提示

### 9.2 用户体验风险
- **学习曲线**：提供详细的新手引导和帮助文档
- **功能复杂度**：保持界面简洁，重要功能突出显示
- **用户流失**：通过游戏化设计和AI陪伴增强用户粘性

### 9.3 产品定位风险
- **竞品压力**：持续关注市场动态，保持产品差异化优势
- **用户需求变化**：建立用户反馈机制，快速响应需求变化
- **技术更新**：保持技术栈的先进性，定期升级和优化

---

**文档版本**：v2.1  
**更新日期**：2024年12月  
**负责人**：产品团队  
**审核状态**：已审核  

本文档为CodeQuest v2.1版本的完整产品需求文档，涵盖了所有核心功能模块的详细说明和技术实现方案。